/*
react-json v0.2.1
https://github.com/arqex/react-json
MIT: https://github.com/arqex/react-json/raw/master/LICENSE
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require(void 0)):"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Json=t(require(void 0)):e.Json=t(e.React)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r,i=n(1),s=n(2),a=n(8),o=n(9),u=n(11),p=n(16),c=n(17),l=n(19),f=n(20),d=n(21),h=n(22),g=n(23),v=n(10),y="undefined"!=typeof document||"";y&&(r=document.documentElement.style,("flexWrap"in r||"webkitFlexWrap"in r||"msFlexWrap"in r)&&(y=" jsonFlex"));var m=i.createClass({getDefaultProps:function(){return{value:{},errors:!1,updating:!1}},childContextTypes:{typeDefaults:i.PropTypes.object},getChildContext:function(){return{typeDefaults:this.state.defaults}},getInitialState:function(){var e=this,t=this.props.value;return t.getListener||(t=new s(t).get()),t.getListener().on("update",function(t){return e.state.updating?e.setState({updating:!1}):(e.setState({value:t}),e.state.errors&&e.getValidationErrors(),void(e.props.onChange&&e.props.onChange(t.toJS())))}),{value:t,defaults:this.createDefaults(),id:this.getId()}},componentWillReceiveProps:function(e){e.value.getListener||this.setState({updating:!0,value:this.state.value.reset(e.value)}),this.setState({defaults:this.createDefaults()})},render:function(){var e=this.props.settings||{},t=i.createElement(o,{type:"object",value:this.state.value,settings:a({},this.state.defaults.object,{fields:e.fields,editing:this.getFormSetting(e,"editing","always"),fixedFields:this.getFormSetting(e,"fixedFields",!0),adder:this.getFormSetting(e,"adder",!1),hiddenFields:e.hiddenFields,header:!1,order:e.order}),ref:"value",defaults:this.state.defaults,id:this.state.id}),n="jsonEditor"+y;return i.DOM.div({className:n},t)},getValue:function(){return this.state.value.toJS()},getValidationErrors:function(){var e=this.getValue(),t=this.refs.value.getValidationErrors(e);return this.setState({errors:t.length}),!!t.length&&t},getDeepSettings:function(){var e={};for(var t in v)e[t]=v[t](this,e[t]);return e},createDefaults:function(){var e=this.props.settings||{},t=o.prototype.components,n=e.defaults||{},r={};for(var i in t)r[i]=a({},t[i].prototype.defaults||{},n[i]||{});return r},getId:function(){return btoa(parseInt(1e4*Math.random())).replace(/=/g,"")},getFormSetting:function(e,t,n){return"undefined"!=typeof e[t]?e[t]:e.form?n:void 0}});m.registerType=o.registerType.bind(o),m.registerType("object",u),m.registerType("array",p,!0),m.registerType("string",c,!0),m.registerType("text",d,!0),m.registerType("number",f,!0),m.registerType("boolean",l,!0),m.registerType("password",h),m.registerType("select",g),e.exports=m},function(t,n){t.exports=e},function(e,t,n){var r=n(3);e.exports=r},function(e,t,n){"use strict";var r=n(4),i=n(5),s=(n(6),n(7)),a=function(e,t){var n,i=this,a=function(e,t,n){return"listener"==e?s.createListener(t):s.update(e,t,n)},o=function(){};t||(o=function(e){Object.freeze(e)}),n=s.freeze(e,a,o);var u=n.getListener(),p=!1;u.on("immediate",function(e,t){e==n&&(n=t,p||(p=!0,r.nextTick(function(){p=!1,i.trigger("update",n)})))}),r.addNE(this,{get:function(){return n},set:function(e){var t=a("reset",n,e);t.__.listener.trigger("immediate",n,t)}}),r.addNE(this,{getData:this.get,setData:this.set}),this._events=[]};a.prototype=r.createNonEnumerable({constructor:a},i),e.exports=a},function(e,t){"use strict";var n=new Function("return this")(),r={extend:function(e,t){for(var n in t)e[n]=t[n];return e},createNonEnumerable:function(e,t){var n={};for(var r in e)n[r]={value:e[r]};return Object.create(t||{},n)},error:function(e){var t=new Error(e);if(console)return console.error(t);throw t},each:function(e,t){var n,r,i;if(e&&e.constructor==Array)for(n=0,r=e.length;n<r;n++)t(e[n],n);else for(i=Object.keys(e),n=0,r=i.length;n<r;n++)t(e[i[n]],i[n])},addNE:function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!1,configurable:!0,writable:!0,value:t[n]})},nextTick:function(){function e(){for(;r=i.shift();)r();s=!1}function t(e){i.push(e),s||(s=!0,u())}var r,i=[],s=!1,a=!!n.postMessage,o="nexttick",u=function(){return a?function(){n.postMessage(o,"*")}:function(){setTimeout(function(){p()},0)}}(),p=function(){return a?function(t){t.source===n&&t.data===o&&(t.stopPropagation(),e())}:e}();return a&&n.addEventListener("message",p,!0),t.removeListener=function(){n.removeEventListener("message",p,!0)},t}()};e.exports=r},function(e,t,n){"use strict";var r=n(4),i={on:function(e,t,n){var r=this._events[e]||[];return r.push({callback:t,once:n}),this._events[e]=r,this},once:function(e,t){this.on(e,t,!0)},off:function(e,t){if("undefined"==typeof e)this._events={};else if("undefined"==typeof t)this._events[e]=[];else{var n,r=this._events[e]||[];for(n=r.length-1;n>=0;n--)r[n]===t&&r.splice(n,1)}return this},trigger:function(e){var t,n,r=[].slice.call(arguments,1),i=this._events[e]||[],s=[];for(t=0;t<i.length;t++)n=i[t],n.callback?n.callback.apply(null,r):n.once=!0,n.once&&s.push(t);for(t=s.length-1;t>=0;t--)i.splice(s[t],1);return this}},s=r.createNonEnumerable(i);e.exports=s},function(e,t,n){"use strict";var r=n(4),i=function(e){var t={};for(var n in e)t[n]={writable:!0,configurable:!0,enumerable:!1,value:e[n]};return t},s={set:function(e,t){var n=e,r=this.__.trans;if("undefined"!=typeof t&&(n={},n[e]=t),!r){for(var i in n)r=r||this[i]!=n[i];if(!r)return this}return this.__.notify("merge",this,n)},reset:function(e){return this.__.notify("replace",this,e)},getListener:function(){return this.__.notify("listener",this)},toJS:function(){var e;return e=this.constructor==Array?new Array(this.length):{},r.each(this,function(t,n){t&&t.__?e[n]=t.toJS():e[n]=t}),e},transact:function(){return this.__.notify("transact",this)},run:function(){return this.__.notify("run",this)}},a=r.extend({push:function(e){return this.append([e])},append:function(e){return e&&e.length?this.__.notify("splice",this,[this.length,0].concat(e)):this},pop:function(){return this.length?this.__.notify("splice",this,[this.length-1,1]):this},unshift:function(e){return this.prepend([e])},prepend:function(e){return e&&e.length?this.__.notify("splice",this,[0,0].concat(e)):this},shift:function(){return this.length?this.__.notify("splice",this,[0,1]):this},splice:function(e,t,n){return this.__.notify("splice",this,arguments)}},s),o=Object.create(Array.prototype,i(a)),u={Hash:Object.create(Object.prototype,i(r.extend({remove:function(e){var t=[],n=e;e.constructor!=Array&&(n=[e]);for(var r=0,i=n.length;r<i;r++)this.hasOwnProperty(n[r])&&t.push(n[r]);return t.length?this.__.notify("remove",this,t):this}},s))),List:o,arrayMethods:a};e.exports=u},function(e,t,n){"use strict";var r=n(4),i=n(6),s=n(5),a={freeze:function(e,t,n){if(e&&e.__)return e;var s,a,o=this;return s=e.constructor==Array?this.createArray(e.length):Object.create(i.Hash),r.addNE(s,{__:{listener:!1,parents:[],notify:t,dirty:!1,freezeFn:n}}),r.each(e,function(e,r){a=e&&e.constructor,a!=Array&&a!=Object||(e=o.freeze(e,t,n)),e&&e.__&&o.addParent(e,s),s[r]=e}),n(s),s},update:function(e,t,n){return this[e]?this[e](t,n):r.error("Unknown update type: "+e)},reset:function(e,t){var n,i=this;return t&&t.__?(n=t,n.__.listener=t.__.listener,n.__.parents=[],this.fixChildren(n,e),r.each(n,function(t){t&&t.__&&(i.removeParent(e),i.addParent(t,n))})):n=this.freeze(e,e.__.notify,e.__.freezeFn),n},merge:function(e,t){var n=e.__.trans,t=r.extend({},t);if(n){for(var i in t)n[i]=t[i];return e}var s,a,o,u,p=this,c=this.copyMeta(e),l=e.__.notify;r.each(e,function(n,r){return u=n&&n.__,u&&p.removeParent(n,e),(s=t[r])?(a=s&&s.constructor,a!=Array&&a!=Object||(s=p.freeze(s,l,e.__.freezeFn)),s&&s.__&&p.addParent(s,c),delete t[r],void(c[r]=s)):(u&&p.addParent(n,c),c[r]=n)});for(o in t)s=t[o],a=s&&s.constructor,a!=Array&&a!=Object||(s=p.freeze(s,l,e.__.freezeFn)),s&&s.__&&p.addParent(s,c),c[o]=s;return e.__.freezeFn(c),this.refreshParents(e,c),c},replace:function(e,t){var n=this,r=t&&t.constructor,i=e.__,s=t;r!=Array&&r!=Object||(s=n.freeze(t,i.notify,i.freezeFn),s.__.parents=i.parents,i.listener&&(s.__.listener=e.__.listener),s.__.listener&&this.trigger(s,"update",s)),!i.parents.length&&i.listener&&i.listener.trigger("immediate",e,s);for(var a=i.parents.length-1;a>=0;a--)0==a?this.refresh(i.parents[a],e,s,!1):this.markDirty(i.parents[a],[e,s]);return s},remove:function(e,t){var n=e.__.trans;if(n){for(var i=t.length-1;i>=0;i--)delete n[t[i]];return e}var s,a=this,o=this.copyMeta(e);return r.each(e,function(n,r){s=n&&n.__,s&&a.removeParent(n,e),t.indexOf(r)==-1&&(s&&a.addParent(n,o),o[r]=n)}),e.__.freezeFn(o),this.refreshParents(e,o),o},splice:function(e,t){var n=e.__.trans;if(n)return n.splice.apply(n,t),e;var i,s,a=this,o=this.copyMeta(e),u=t[0],p=u+t[1],c=e.__;if(r.each(e,function(t,n){t&&t.__&&(a.removeParent(t,e),(n<u||n>=p)&&a.addParent(t,o)),o[n]=t}),t.length>1)for(var l=t.length-1;l>=2;l--)s=t[l],i=s&&s.constructor,i!=Array&&i!=Object||(s=this.freeze(s,c.notify,c.freezeFn)),s&&s.__&&this.addParent(s,o),t[l]=s;return Array.prototype.splice.apply(o,t),e.__.freezeFn(o),this.refreshParents(e,o),o},transact:function(e){var t,n=this,i=e.__.trans;return i?i:(t=e.constructor==Array?[]:{},r.each(e,function(e,n){t[n]=e}),e.__.trans=t,r.nextTick(function(){e.__.trans&&n.run(e)}),t)},run:function(e){var t=this,n=e.__.trans;if(!n)return e;r.each(n,function(n,r){n&&n.__&&t.removeParent(n,e)}),delete e.__.trans;var i=this.replace(e,n);return i},refresh:function(e,t,n,i){var s=this,a=e.__.trans,o=0;if(a)return r.each(a,function(r,i){o||r===t&&(a[i]=n,o=1,n&&n.__&&s.addParent(n,e))}),e;var u,p,c,l=this.copyMeta(e),f=e.__.dirty;return f&&(u=f[0],p=f[1]),r.each(e,function(r,i){r===t?r=n:r===u&&(r=p),r&&(c=r.__)&&(!c.trans&&c.dirty&&(r=s.refresh(r,c.dirty[0],c.dirty[1],!0)),s.removeParent(r,e),s.addParent(r,l)),l[i]=r}),e.__.freezeFn(l),e.__.dirty=!1,i?l:void this.refreshParents(e,l)},fixChildren:function(e,t){var n=this;r.each(e,function(r){if(r&&r.__){if(r.__.parents.indexOf(e)!=-1)return n.fixChildren(r);if(1==r.__.parents.length)return r.__.parents=[e];t&&n.removeParent(r,t),n.addParent(e)}})},copyMeta:function(e){var t;t=e.constructor==Array?this.createArray(e.length):Object.create(i.Hash);var n=e.__;return r.addNE(t,{__:{notify:n.notify,listener:n.listener,parents:n.parents.slice(0),trans:n.trans,dirty:!1,freezeFn:n.freezeFn}}),t},refreshParents:function(e,t){var n,r=e.__;if(r.listener&&this.trigger(t,"update",t),r.parents.length)for(n=r.parents.length-1;n>=0;n--)0==n?this.refresh(r.parents[n],e,t,!1):this.markDirty(r.parents[n],[e,t]);else r.listener&&r.listener.trigger("immediate",e,t)},markDirty:function(e,t){var n,r=e.__;for(r.dirty=t,r.trans&&this.refresh(e,t[0],t[1]),n=r.parents.length-1;n>=0;n--)this.markDirty(r.parents[n],t)},removeParent:function(e,t){var n=e.__.parents,r=n.indexOf(t);r!=-1&&n.splice(r,1)},addParent:function(e,t){var n=e.__.parents,r=n.indexOf(t);r==-1&&(n[n.length]=t)},trigger:function(e,t,n){var i=e.__.listener,s=i.ticking;i.ticking=n,s||r.nextTick(function(){var e=i.ticking;i.ticking=!1,i.trigger(t,e)})},createListener:function(e){var t=e.__.listener;return t||(t=Object.create(s,{_events:{value:{},writable:!0}}),e.__.listener=t),t},createArray:function(){return[].__proto__?function(e){var t=new Array(e);return t.__proto__=i.List,t}:function(e){var t=new Array(e),n=i.arrayMethods;for(var r in n)t[r]=n[r];return t}}()};e.exports=a},function(e,t){"use strict";function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=Object.assign||function(e,t){for(var r,i,s=n(e),a=1;a<arguments.length;a++){r=arguments[a],i=Object.keys(Object(r));for(var o=0;o<i.length;o++)s[i[o]]=r[i[o]]}return s}},function(e,t,n){"use strict";var r=n(1),i=n(10),s=n(8),a=r.createClass({components:{},typeCheckOrder:[],contextTypes:{typeDefaults:r.PropTypes.object},render:function(){var e=this.getComponent(),t=s({},this.context.typeDefaults[this.props.type],this.props.settings);return this.addDeepSettings(t),r.createElement(e,{value:this.props.value,settings:t,onUpdated:this.props.onUpdated,id:this.props.id,ref:"field"})},getComponent:function(){var e=this.props.type;return e||(e=this.guessType(this.props.value)),this.fieldType=e,this.components[e]},guessType:function(e){for(var t,n=!1,r=0,i=this.typeCheckOrder;!n&&r<i.length;)t=this.components[i[r]].prototype,t.isType&&t.isType(e)?n=i[r++]:r++;return n||"object"},getValidationErrors:function(e){return this.refs.field.getValidationErrors(e)},addDeepSettings:function(e){var t,n=this.props.parentSettings||{};for(var r in i)t=i[r](n[r],e[r]),"undefined"!=typeof t&&(e[r]=t)}});a.registerType=function(e,t,n){var r=a.prototype;r.components[e]=t,n&&r.typeCheckOrder.unshift(e)},e.exports=a},function(e,t){e.exports={editing:function(e,t){return"undefined"!=typeof t?t:"always"==e?"always":void 0},adder:function(e,t){return"undefined"!=typeof t?t:"undefined"==typeof e||e},fixedFields:function(e,t){return"undefined"!=typeof t?t:"boolean"==typeof e?e:void 0}}},function(e,t,n){"use strict";var r=n(1),i=n(12),s=n(8),a=n(14),o=r.createClass({mixins:[a],getInitialState:function(){return this.getStateFromProps(this.props)},getStateFromProps:function(e){return{editing:e.settings.editing||!1,fields:s({},e.settings&&e.settings.fields||{})}},defaultValue:{},render:function(){var e=this,t=this.props.settings,n=this.state.editing||t.header===!1?"open jsonObject jsonCompound":"jsonObject jsonCompound",i="",a=(this.state.fields,[]),o=(s({},this.props.value),this.getFixedFields()),u=this.getHiddenFields(),p=0;this.getFieldOrder().forEach(function(t){t.constructor===Array?a.push(e.renderGroup(t,o,++p)):u[t]||a.push(e.renderField(t,o))});var c=[a];return t.adder!==!1&&c.push(this.renderAdder()),i=r.DOM.div({key:"o",className:"jsonChildren"},c),r.DOM.span({className:n},[this.renderHeader(),i])},renderField:function(e,t){var n=this.props.value[e],s=this.state.fields[e]||{},a=t===!0||"object"==typeof t&&t[e];return s.settings||(s.settings={}),r.createElement(i,{value:n,key:e,name:e,ref:e,fixed:a,id:this.props.id,definition:s,onUpdated:this.updateField,onDeleted:this.deleteField,parentSettings:this.props.settings})},renderGroup:function(e,t,n){var i=this,s=[];return e.forEach(function(e){s.push(i.renderField(e,t))}),r.DOM.div({className:"jsonGroup jsonGroup_"+n},s)},getDefaultHeader:function(){return"Map ["+Object.keys(this.props.value).length+"]"},getDefaultAdder:function(){return"+ Add field"},updateField:function(e,t){this.checkEditingSetting(e),this.props.value.set(e,t)},deleteField:function(e){this.props.value.remove(e)},getValidationErrors:function(e){var t=this,n=[],r=Object.keys(this.refs);return r.forEach(function(e){var r=t.refs[e].getValidationErrors();r&&(n=n.concat(r))}),n},getFieldOrder:function(){var e,t=this,n=this.props.settings.order,r=typeof n,i=this.props.settings.fields||{};if(!n||"function"!=r&&n.constructor!==Array)return Object.keys(this.props.value);var a=s({},this.props.value),o=[];if("function"==r)return n(a);n.constructor===Array&&n.forEach(function(n){n.constructor==Array?(e=[],n.forEach(function(n){t.addFieldToOrder(n,a,i)&&(e.push(n),delete a[n])}),e.length&&o.push(e)):t.addFieldToOrder(n,a,i)&&(o.push(n),delete a[n])});for(var u in a)o.indexOf(u)==-1&&o.push(u);return o},addFieldToOrder:function(e,t,n){return"undefined"!=typeof t[e]||n[e]&&"react"==n[e].type},getHiddenFields:function(){var e=this.props.settings.hiddenFields,t={};return e?(e.forEach(function(e){t[e]=1}),t):t}});e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(8),s=n(13),a=n(9),o=r.createClass({getInitialState:function(){return{error:!1}},getDefaultProps:function(){return{definition:{}}},render:function(){var e,t=this.props.definition||{},n="jsonField",i=t.type||a.prototype.guessType(this.props.value),s=this.props.id+"_"+this.props.name,o="";if("react"==i)return this.renderReactField(t);e=this.renderTypeField(i,s),n+=" "+i+"Field",this.state.error&&(n+=" jsonError",this.state.error!==!0&&(o=r.DOM.span({key:"e",className:"jsonErrorMsg"},this.state.error)));var u=[r.DOM.label({key:"s1",htmlFor:s},(t.title||this.props.name)+":")];return this.props.fixed?u.unshift(r.DOM.span({key:"f",className:"jsonFixed"})):u.unshift(r.DOM.a({key:"a",href:"#",className:"jsonRemove",onClick:this.handleRemove},"x")),r.DOM.div({className:n},[r.DOM.span({className:"jsonName",key:"n"},u),r.DOM.span({className:"jsonValue",key:"v"},e),o])},renderTypeField:function(e,t){var n,s=this.props.definition,o=i({},s.settings||{});return s.fields&&(o.fields=s.fields),n=r.createElement(a,{type:e,value:this.props.value,settings:o,onUpdated:this.onUpdated,ref:"typeField",id:t,parentSettings:this.props.parentSettings})},renderReactField:function(e){return r.DOM.div({className:"jsonField reactField"},e.output)},handleRemove:function(e){this.props.onDeleted(this.props.name)},shouldComponentUpdate:function(e,t){return e.value!=this.props.value||t.error!=this.state.error},onUpdated:function(e){var t=this.props.definition;this.props.value!==e&&(this.props.onUpdated(this.props.name,e),t.onChange&&t.onChange(e,this.props.value))},getValidationErrors:function(e){var t=[],n=this.props.definition.validates,r=this.props.name,i=this.refs.typeField;if(!i)return[];if("object"==i.fieldType&&(t=i.getValidationErrors(e),t.forEach(function(e){e.path?e.path=r+"."+e.path:e.path=r}),t.length&&this.setState({error:!0})),!n)return t;var a,o=s.getValidationError(this.props.value,e,n);return o?(a=this.props.definition.errorMessage,a||(a=(this.props.definition.label||this.props.name)+" value is not valid."),o.path=r,o.message=a,this.setState({error:a}),t=t.concat([o])):this.state.error&&this.setState({error:!1}),t}});e.exports=o},function(e,t){"use strict";function n(e,t){return e.length?n(e.slice(1),t[e[0]]):t}var r={required:function(e){return!!e&&!("string"==typeof e&&!e.trim())},email:function(e){if(!e)return!0;var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},length:function(e,t,n,r){return n||(n=0),r||(r=1/0),e.length>=n&&e.length<=r},integer:function(e,t,n,r){if(n||0===n||(n=-(1/0)),r||(r=1/0),!e&&0!=e)return!0;var i=parseInt(e);return e==i&&(i<=r&&i>=n)},checked:function(e){return e},matches:function(e,t,r){return e==n(r.split("."),t)}};e.exports={getValidationError:function(e,t,n){var a=[],o=!1,u=0;"string"==typeof n?a=i(n):"function"==typeof n?a=[n]:n&&n.constructor===Array&&(a=n);for(var p,c,l;!o&&u<a.length;)l=a[u++],"string"==typeof l?(p=s(l),c=r[p.name],c?c.apply(null,[e,t].concat(p.args))||(o={value:e,method:l}):console.log("Unkown validation method "+p.name)):"function"==typeof l&&(l(e,t)||(o={value:e,method:"custom"}));return o}};var i=function(e){return e.match(/[^\s\[]+(\[[^\]]+?\])?/gi)},s=function(e){var t,n=e.split("["),r={name:n[0],args:[]};return n.length>1&&(t=n[1],"]"==t[t.length-1]&&(t=t.slice(0,t.length-1)),r.args=t.split(/\s*,\s*/)),r}},function(e,t,n){"use strict";var r=n(1),i=n(15),s=n(8);e.exports={renderHeader:function(){var e=this.props.settings.header;if(e===!1)return"";var t,n=typeof e;return t="function"==n?e(this.props.value.toJS()):"undefined"==n?this.getDefaultHeader():e,r.DOM.span({key:"s",onClick:this.toggleEditing,className:"compoundToggle"},t)},toggleEditing:function(){"always"!=this.state.editing&&this.props.settings.header!==!1&&this.setState({editing:!this.state.editing})},componentWillReceiveProps:function(e){this.props.settings.editing!=e.settings.editing&&this.setState({editing:e.editing})},renderAdder:function(e){var t,n=this.props.settings.adder,s=typeof n;return t="function"==s?n(this.props.value.toJS()):n===!0||"undefined"==s?this.getDefaultAdder():n,r.createElement(i,{onCreate:this.createField,name:e,key:"add",text:t})},createField:function(e,t,n){if(this.props.value[e])return console.log("Field "+e+" already exists.");n.settings={editing:"always"!=this.state.editing||"always",focus:!0};var r=s({},this.state.fields);r[e]=n,this.setState({fields:r}),this.props.value.set(e,t)},checkEditingSetting:function(e){var t=this.state.fields;t[e]&&t[e].settings.focus===!0&&(t=s({},t),t[e].settings.focus=!1,this.setState({fields:t}))},getFixedFields:function(){var e=this.props.settings.fixedFields,t={};return e&&e.constructor==Array?(e.forEach(function(e){t[e]=1}),t):e}}},function(e,t,n){var r=n(1),i=n(9),s=r.createClass({getInitialState:function(){return{creating:this.props.creating||!1,name:this.props.name,type:"string"}},render:function(){if(!this.state.creating)return r.DOM.a({className:"jsonAdd",href:"#",onClick:this.handleCreate},this.props.text);var e,t=this.getTypes().map(function(e){return r.DOM.option({value:e,key:e},e[0].toUpperCase()+e.slice(1))});return e="undefined"!=typeof this.props.name?[r.DOM.span({className:"jsonName"},this.props.name),r.DOM.span(null,":")]:[r.DOM.input({ref:"keyInput",type:"text",value:this.state.value,onChange:this.changeKey}),r.DOM.span(null,":")],r.DOM.div({className:"jsonField jsonFieldAdder"},[e,r.DOM.select({key:"s",value:this.state.type,onChange:this.changeType,ref:"typeSelector"},t),r.DOM.button({key:"b",onClick:this.createField},"OK"),r.DOM.a({key:"a",href:"#",className:"cancelField",onClick:this.handleCancel},"Cancel")])},componentDidUpdate:function(e,t){!t.creating&&this.state.creating&&(this.refs.keyInput?this.refs.keyInput.focus():this.refs.typeSelector.focus())},componentWillReceiveProps:function(e){this.setState({name:e.name})},handleCreate:function(e){e.preventDefault(),this.setState({creating:!0})},handleCancel:function(e){e.preventDefault(),this.setState({creating:!1})},changeType:function(e){this.setState({type:e.target.value})},changeKey:function(e){this.setState({name:e.target.value})},createField:function(){this.setState({creating:!1});var e=i.prototype.components[this.state.type].prototype.defaultValue;this.props.onCreate(this.state.name,e,{type:this.state.type})},getTypes:function(){return Object.keys(i.prototype.components)}});e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(12),s=(n(8),n(14)),a=r.createClass({mixins:[s],getInitialState:function(){return this.getStateFromProps(this.props)},getStateFromProps:function(e){return{editing:e.settings.editing||!1,fields:this.state&&this.state.fields||{}}},defaultValue:[],render:function(){for(var e,t,n=this.props.settings,s=this.state.editing?"open jsonArray jsonCompound":"jsonArray jsonCompound",a="",o=this.getFixedFields(),u=this.state.fields,p=[],c=0;c<this.props.value.length;c++)e=u[c]||{},e.settings||(e.settings={}),t=o===!0||"object"==typeof o&&o[c],p.push(r.createElement(i,{value:this.props.value[c],key:c,name:c,id:this.props.id,definition:e,fixed:t,onUpdated:this.updateField,onDeleted:this.deleteField,parentSettings:this.props.settings}));var l=[p];return n.adder!==!1&&l.push(this.renderAdder(this.props.value.length)),a=r.DOM.div({key:"o",className:"jsonChildren"},l),r.DOM.span({className:s},[this.renderHeader(),a])},getDefaultHeader:function(){return"List ["+this.props.value.length+"]"},getDefaultAdder:function(){return"+ Add element"},updateField:function(e,t){this.checkEditingSetting(e),this.props.value.set(e,t)},deleteField:function(e){var t={};for(var n in this.state.fields)n>e?t[n-1]=this.state.fields[n]:n<e&&(t[n]=this.state.fields[n]);this.props.value.splice(e,1),this.setState({fields:t})},isType:function(e){return e&&e.constructor==Array}});e.exports=a},function(e,t,n){var r=n(1),i=n(18),s=r.createClass({mixins:[i],typeClass:"jsonString",inputType:"text",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},updateValue:function(e){this.setState({value:e.target.value})},isType:function(e){return"object"!=typeof e}});e.exports=s},function(e,t,n){"use strict";var r=n(1);e.exports={getStateFromProps:function(e){return{editing:e.settings.editing||!1,value:e.value}},renderInput:function(){var e=this.typeClass;return this.state.editing?r.DOM.input({type:this.inputType,value:this.state.value,id:this.props.id,placeholder:this.props.settings.placeholder||"",onChange:this.updateValue,onBlur:this.setValue,ref:"input",onKeyDown:this.handleKeyDown}):r.DOM.span({onClick:this.setEditMode,className:e},this.getDisplayString())},getDisplayString:function(){return this.getDisplayModeString?this.getDisplayModeString():""===this.props.value?r.DOM.span({className:"jsonNovalue"},"No value"):this.props.value},componentWillReceiveProps:function(e){var t={},n=!1;this.props.value!=e.value&&(n=!0,t.value=e.value),this.props.settings.editing!=e.settings.editing&&(n=!0,t.editing=e.editing),n&&this.setState(t)},componentDidUpdate:function(e,t){(this.state.editing&&!t.editing||this.props.settings.focus)&&this.focus()},componentDidMount:function(){(this.state.editing===!0||this.props.settings.focus)&&this.focus()},setEditMode:function(){this.setState({editing:!0})},setValue:function(){"always"!=this.state.editing&&this.setState({editing:!1}),this.props.onUpdated(this.state.value)},toggleEditing:function(){this.setState({editing:!this.state.editing})},handleKeyDown:function(e){13==e.which&&this.setValue()},focus:function(){var e=this.refs.input;e&&(e.focus(),e.value=e.value)}}},function(e,t,n){var r=n(1),i=r.createClass({defaultValue:!1,render:function(){var e="jsonBoolean";return r.DOM.input({type:"checkbox",className:e,id:this.props.id,checked:this.props.value,onChange:this.updateValue})},updateValue:function(e){this.props.onUpdated(e.target.checked)},isType:function(e){return"boolean"==typeof e},componentWillReceiveProps:function(e){this.props.value!=e.value&&this.setState({value:e.value})}});e.exports=i},function(e,t,n){var r=n(1),i=n(18),s=r.createClass({mixins:[i],typeClass:"jsonNumber",inputType:"number",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},updateValue:function(e){this.setState({value:parseFloat(e.target.value)})},isType:function(e){return"number"==typeof e}});e.exports=s},function(e,t,n){var r=n(1),i=n(18),s=r.createClass({mixins:[i],defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){var e="jsonText";return this.state.editing?r.DOM.textarea({value:this.state.value,id:this.props.id,onChange:this.updateValue,placeholder:this.props.settings.placeholder||"",onBlur:this.setValue,ref:"input"}):r.DOM.span({onClick:this.setEditMode,className:e},this.props.value)},updateValue:function(e){this.setState({value:e.target.value})},isType:function(e){return"string"==typeof e&&e.length>100}});e.exports=s},function(e,t,n){var r=n(1),i=n(18),s=r.createClass({mixins:[i],typeClass:"jsonPassword",inputType:"password",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},getDisplayModeString:function(){return this.getWildcards()},getWildcards:function(){for(var e="",t=this.state.value.length-1;t>=0;t--)e+="*";return e},isType:function(){return!1},updateValue:function(e){this.setState({value:e.target.value})}});e.exports=s},function(e,t,n){var r=n(1),i=r.createClass({defaultValue:"",getInitialState:function(){return{value:this.props.value}},render:function(){var e="jsonSelect";return r.DOM.select({className:e,id:this.props.id,value:this.props.value,onChange:this.updateValue},this.renderOptions())},renderOptions:function(){var e=this.props.settings.options,t=[];return e&&e.length?(e.forEach(function(e){var n=e;"object"!=typeof e&&(n={value:e,label:e}),t.push(r.DOM.option({value:n.value},n.label))}),t):t},updateValue:function(e){this.props.onUpdated(e.target.value)},componentWillReceiveProps:function(e){this.props.value!=e.value&&this.setState({value:e.value})}});e.exports=i}])});